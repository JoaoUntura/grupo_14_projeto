<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Produtos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="d-flex">
      <%- include('partials/sidebar', { user: user }) %>
      <%- include('partials/logout') %>


        <div class="card shadow p-4 mb-4">
          <h2 class="mb-3">Cadastro de Produtos</h2>
          <form id="form-produto" method="POST" action="/produtos">
            <div class="mb-3">
              <label for="nomeProduto" class="form-label">Nome do Produto:</label>
              <input type="text" class="form-control" id="nomeProduto" name="nomeProduto" required />
            </div>

            <div class="mb-3">
              <label for="valorProduto" class="form-label">Valor (R$):</label>
              <input
                type="number"
                class="form-control"
                id="valorProduto"
                name="valorProduto"
                min="0"
                step="0.01"
                placeholder="0,00"
                required
              />
            </div>

            <div class="d-flex gap-2">
              <button type="submit" class="btn btn-primary">Salvar</button>
              <button  class="btn btn-primary">Gerenciar produtos</button>
            </div>

            <div id="feedback" class="mt-3"></div>
          </form>
        </div>

        <!-- üßæ Lista de Produtos -->
        <div class="card shadow p-4">
          <h2 class="mb-3">Lista de Produtos</h2>

          <% if (produtos && produtos.length > 0) { %>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nome</th>
                  <th>Pre√ßo (R$)</th>
                </tr>
              </thead>
              <tbody>
                <% produtos.forEach(produto => { %>
                  <tr>
                    <td><%= produto.id %></td>
                    <td><%= produto.nome %></td>
                    <td><%= parseFloat(produto.preco).toFixed(2) %></td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          <% } else { %>
            <p class="text-muted">Nenhum produto cadastrado ainda.</p>
          <% } %>
        </div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
